<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon to eBay Web UI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body class="bg-slate-100 text-slate-900" data-initial-tab="{{ initial_tab|default('single') }}">
    <div class="min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-200 py-8 px-4">
        <div class="mx-auto max-w-6xl">
            <header class="mb-6 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
                <div>
                    <p class="text-sm font-semibold uppercase tracking-wide text-indigo-600">Amazon → eBay</p>
                    <h1 class="text-3xl font-bold text-slate-900">Listing Companion</h1>
                    <p class="text-slate-600">Scrape Amazon products and list them on eBay with ease.</p>
                </div>
                <div class="flex items-center gap-3">
                    <span id="statusBadge" class="status-pill inline-flex items-center rounded-full px-3 py-1 text-sm font-semibold" data-tone="idle">Idle</span>
                    <span id="loadingSpinner" class="status-spinner" hidden aria-hidden="true" title="Working"></span>
                </div>
            </header>

            <div class="grid gap-6 lg:grid-cols-[3fr,1fr] xl:grid-cols-[4fr,1fr]">
                <section class="rounded-2xl bg-white shadow-lg ring-1 ring-slate-200/60">
                    <div class="border-b border-slate-100 px-4 pt-4 sm:px-6">
                        <div class="panel-tabs flex gap-2 rounded-xl bg-slate-100 p-1">
                            <button class="panel-tab active flex-1 rounded-lg px-4 py-2 text-sm font-semibold transition" data-target="single-panel">Single</button>
                            <button class="panel-tab flex-1 rounded-lg px-4 py-2 text-sm font-semibold transition" data-target="bulk-panel">Bulk</button>
                        </div>
                    </div>

                    <div class="panel-body active space-y-6 px-4 py-6 sm:px-6" id="single-panel">
                        <div class="space-y-2">
                            <label for="amazonUrl" class="text-sm font-semibold text-slate-700">Amazon URL</label>
                            <div class="flex flex-col gap-3 lg:flex-row">
                                <input id="amazonUrl" type="text" placeholder="https://www.amazon.co.uk/…" class="input">
                                <div class="flex gap-3">
                                    <button id="loadJsonBtn" type="button" class="btn btn-secondary whitespace-nowrap">Load JSON</button>
                                    <input id="jsonFile" type="file" accept="application/json" hidden>
                                </div>
                            </div>
                        </div>

                        <div class="grid gap-4 sm:grid-cols-2">
                            <div class="space-y-2">
                                <label for="quantity" class="text-sm font-semibold text-slate-700">Quantity</label>
                                <input id="quantity" type="number" min="1" placeholder="1" class="input">
                            </div>
                            <div class="space-y-2">
                                <label for="sellerNote" class="text-sm font-semibold text-slate-700">Private Note</label>
                                <input id="sellerNote" type="text" class="input" placeholder="Add an internal note">
                            </div>
                        </div>

                        <div class="space-y-2">
                            <label for="customSpecs" class="text-sm font-semibold text-slate-700">Custom specifics</label>
                            <input id="customSpecs" type="text" placeholder="Size: XL | Colour: Black" class="input">
                        </div>

                        <div class="grid gap-3 sm:grid-cols-2 lg:grid-cols-4">
                            <button id="authBtn" type="button" class="btn btn-primary">Authorize / Refresh</button>
                            <button id="logoutBtn" type="button" class="btn btn-secondary">Logout eBay</button>
                            <button id="scrapeBtn" type="button" class="btn btn-accent">Scrape Amazon</button>
                            <button id="listBtn" type="button" class="btn btn-success" disabled>List on eBay</button>
                        </div>
                    </div>

                    <div class="panel-body space-y-6 px-4 py-6 sm:px-6" id="bulk-panel">
                        <div class="space-y-2">
                            <label for="bulkText" class="text-sm font-semibold text-slate-700 block">Bulk items</label>
                            <textarea id="bulkText" rows="10" class="input w-full min-h-[260px] font-mono text-sm border border-slate-300" placeholder="Paste bulk text here. Example:
https://www.amazon.co.uk/…
Quantity: 2
Note: Gift
Size: L | Colour: Red

…"></textarea>
                        </div>
                        <div class="flex flex-wrap gap-3">
                            <button id="bulkProcessBtn" type="button" class="btn btn-primary">Process Bulk</button>
                            <button id="bulkPauseBtn" type="button" class="btn btn-secondary" hidden>Pause</button>
                            <button id="bulkCancelBtn" type="button" class="btn btn-danger" hidden>Cancel</button>
                        </div>
                        <div id="bulkPreview" class="space-y-3 rounded-xl border border-slate-200 bg-slate-50/70 p-4" hidden>
                            <div id="bulkMeta" class="text-sm font-medium text-slate-600">Paste bulk text to preview items.</div>
                            <div id="bulkItems" class="flex flex-col gap-3"></div>
                        </div>
                    </div>
                </section>

                <aside class="space-y-4 lg:sticky lg:top-4 lg:self-start">
                    <div class="rounded-2xl bg-white p-4 shadow-md ring-1 ring-slate-200/60">
                        <div class="flex items-center justify-between gap-3">
                            <div>
                                <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Status</p>
                                <div id="statusMessage" class="text-lg font-semibold text-slate-900">Ready to start.</div>
                            </div>
                            <div class="rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600">Live</div>
                        </div>
                    </div>

                    <div id="promptPanel" class="prompt-panel rounded-2xl bg-white p-4 shadow-md ring-1 ring-slate-200/60" hidden>
                        <div class="flex flex-1 flex-col gap-2">
                            <span id="promptLabel" class="text-sm font-semibold text-slate-800"></span>
                            <input id="promptInput" type="text" class="input" list="promptDatalist">
                            <datalist id="promptDatalist"></datalist>
                            <select id="promptSelect" class="input"></select>
                        </div>
                        <div class="flex gap-2">
                            <button id="promptOk" type="button" class="btn btn-primary">OK</button>
                            <button id="promptCancel" type="button" class="btn btn-secondary">Cancel</button>
                        </div>
                    </div>

                    <div id="activityLogCard" class="rounded-2xl bg-white p-4 shadow-md ring-1 ring-slate-200/60">
                        <div class="flex items-center justify-between">
                            <h2 class="text-base font-semibold text-slate-800">Activity Log</h2>
                            <button id="toggleLogBtn" type="button" class="text-sm font-semibold text-indigo-600 hover:text-indigo-700">Show Log</button>
                        </div>
                        <div id="logView" class="log-view mt-3 hidden"></div>
                        <div class="mt-2 rounded-lg bg-slate-50 px-3 py-2 text-sm text-slate-600">
                            <strong>Browsing:</strong> Links open directly in a new tab to avoid iframe blocking.
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
